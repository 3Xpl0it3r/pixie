apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
commonLabels:
  app: pl-cloud
namespace: plc
replicas:
- name: api-server
  count: 3
- name: auth-server
  count: 3
- name: profile-server
  count: 3
- name: cloud-proxy
  count: 3
- name: site-manager-server
  count: 3
- name: vzmgr-server
  count: 3
resources:
- cloud_proxy_backend_config.yaml
- vzconn_backend_config.yaml
- ../base
- cloud_ingress.yaml
patchesStrategicMerge:
  - auth0_config.yaml
  - db_config.yaml
  - service_config.yaml
  - domain_config.yaml
  - cloud_proxy_service_np.yaml
  - vzconn_service_be_config.yaml
patches:
  - path: db_sidecar.yaml
    target:
      kind: Deployment
      labelSelector: db=pgsql
