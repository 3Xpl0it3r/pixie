# Generated file: bazel run //templates/skaffold:skaffoldtemplate
# DO NOT EDIT
apiVersion: v1
kind: Pod
metadata:
  name: proxy-server
  labels:
    name: proxy-server
spec:
  containers:
  - name: proxy-server
    image: proxy
    ports:
      - containerPort: 443
        hostPort: 443
    env:
      - name: PL_JWT_SIGNING_KEY
        value: ABC
      - name: PL_EXTERNAL_ADDR
        value: {{.ExternalAddress}}
      - name: PL_TLS_CERT
        value: /certs/server.crt
      - name: PL_TLS_KEY
        value: /certs/server.key
    volumeMounts:
        - name: certs
          mountPath: /certs
  volumes:
    - name: certs
      hostPath:
          path: /certs
---
apiVersion: v1
kind: Service
metadata:
  name: proxy-service
spec:
  type: NodePort
  ports:
    - port: 443
      protocol: TCP
      targetPort: 443
      nodePort: 30011
  selector:
    name: proxy-server
